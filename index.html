<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ASIS Boats - Professional Quotation System V11</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --navy: #0f2847; --navy-dark: #0a1628; --navy-light: #1a3a5c;
            --gold: #c9a227; --gold-light: #e8c547; --gold-dark: #a68521;
            --white: #ffffff; --gray-100: #f8f9fa; --gray-200: #e9ecef; --gray-300: #dee2e6;
            --gray-400: #ced4da; --gray-500: #adb5bd; --gray-600: #6c757d; --gray-700: #495057;
            --success: #28a745; --danger: #dc3545; --warning: #ffc107;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Montserrat', sans-serif; background: var(--gray-100); min-height: 100vh; }
        
        /* Header */
        .header { background: linear-gradient(135deg, var(--navy-dark), var(--navy)); padding: 20px 30px; position: sticky; top: 0; z-index: 100; box-shadow: 0 4px 20px rgba(0,0,0,0.2); }
        .header-inner { max-width: 1400px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; }
        .logo-area { display: flex; align-items: center; gap: 20px; }
        .logo-divider { width: 1px; height: 40px; background: linear-gradient(180deg, transparent, var(--gold), transparent); }
        .logo-text span { font-size: 10px; color: var(--gold); text-transform: uppercase; letter-spacing: 2px; }
        .logo-text h1 { color: var(--white); font-size: 20px; font-weight: 600; }
        .header-right { display: flex; align-items: center; gap: 15px; }
        .quote-badge { background: rgba(201,162,39,0.15); border: 1px solid var(--gold); color: var(--gold); padding: 10px 20px; border-radius: 8px; font-weight: 600; font-size: 14px; }
        
        /* Progress */
        .progress-bar { background: var(--navy-dark); padding: 20px 30px; border-top: 1px solid rgba(255,255,255,0.1); }
        .progress-inner { max-width: 1400px; margin: 0 auto; display: flex; justify-content: space-between; position: relative; }
        .progress-inner::before { content: ''; position: absolute; top: 20px; left: 60px; right: 60px; height: 2px; background: rgba(255,255,255,0.2); }
        .step { display: flex; flex-direction: column; align-items: center; cursor: pointer; position: relative; z-index: 1; }
        .step-num { width: 40px; height: 40px; border-radius: 50%; background: rgba(255,255,255,0.1); border: 2px solid rgba(255,255,255,0.3); display: flex; align-items: center; justify-content: center; color: var(--gray-500); font-weight: 600; font-size: 14px; margin-bottom: 8px; transition: all 0.3s; }
        .step-label { font-size: 11px; color: var(--gray-500); text-transform: uppercase; letter-spacing: 1px; transition: all 0.3s; }
        .step.active .step-num { background: var(--gold); border-color: var(--gold); color: var(--navy-dark); box-shadow: 0 0 20px rgba(201,162,39,0.4); }
        .step.active .step-label { color: var(--gold); }
        .step.done .step-num { background: var(--success); border-color: var(--success); color: white; }
        .step.done .step-label { color: var(--success); }
        
        /* Main */
        .main { max-width: 1400px; margin: 0 auto; padding: 30px; }
        .page { display: none; animation: fadeIn 0.4s ease; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Layout */
        .layout { display: grid; grid-template-columns: 1fr 350px; gap: 25px; }
        @media (max-width: 1100px) { .layout { grid-template-columns: 1fr; } }
        
        /* Cards */
        .card { background: var(--white); border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.08); margin-bottom: 20px; overflow: hidden; }
        .card-header { background: linear-gradient(135deg, var(--navy), var(--navy-light)); padding: 18px 22px; display: flex; justify-content: space-between; align-items: center; }
        .card-header h2 { color: var(--white); font-size: 14px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; display: flex; align-items: center; gap: 10px; }
        .card-header h2::before { content: ''; width: 4px; height: 20px; background: var(--gold); border-radius: 2px; }
        .card-body { padding: 22px; }
        
        /* Boat Types */
        .boat-types { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }
        @media (max-width: 900px) { .boat-types { grid-template-columns: 1fr; } }
        .boat-type { background: var(--gray-100); border: 2px solid var(--gray-200); border-radius: 12px; padding: 25px; cursor: pointer; transition: all 0.3s; text-align: center; position: relative; overflow: hidden; }
        .boat-type::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 4px; background: var(--gray-300); transition: all 0.3s; }
        .boat-type:hover { border-color: var(--navy); transform: translateY(-3px); box-shadow: 0 8px 25px rgba(0,0,0,0.1); }
        .boat-type:hover::before { background: var(--navy); }
        .boat-type.selected { border-color: var(--gold); background: linear-gradient(135deg, #fffef5, #fff9e6); }
        .boat-type.selected::before { background: var(--gold); }
        .boat-type-icon { width: 80px; height: 80px; margin: 0 auto 15px; background: var(--white); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 40px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
        .boat-type h3 { font-size: 18px; font-weight: 700; color: var(--navy); margin-bottom: 8px; }
        .boat-type p { font-size: 13px; color: var(--gray-600); margin-bottom: 15px; }
        .boat-type-stats { display: flex; justify-content: center; gap: 25px; padding-top: 15px; border-top: 1px solid var(--gray-300); }
        .stat { text-align: center; }
        .stat-val { font-size: 16px; font-weight: 700; color: var(--navy); }
        .stat-label { font-size: 10px; color: var(--gray-500); text-transform: uppercase; }
        
        /* Boat Sizes */
        .boat-sizes { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 12px; }
        .boat-size { background: var(--gray-100); border: 2px solid var(--gray-200); border-radius: 10px; padding: 18px; cursor: pointer; text-align: center; transition: all 0.3s; }
        .boat-size:hover { border-color: var(--navy); transform: translateY(-2px); }
        .boat-size.selected { border-color: var(--gold); background: linear-gradient(135deg, #fffef5, #fff9e6); }
        .boat-size .size { font-size: 22px; font-weight: 700; color: var(--navy); }
        .boat-size .price { font-size: 15px; font-weight: 600; color: var(--gold-dark); margin: 6px 0; }
        .boat-size .specs { font-size: 11px; color: var(--gray-500); }
        
        /* Summary Sidebar */
        .summary { background: linear-gradient(135deg, var(--navy-dark), var(--navy)); border-radius: 12px; padding: 22px; color: var(--white); position: sticky; top: 180px; }
        .summary-title { font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 1px; color: var(--gold); margin-bottom: 15px; padding-bottom: 12px; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .summary-row { display: flex; justify-content: space-between; padding: 8px 0; font-size: 13px; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .summary-row .lbl { color: var(--gray-400); }
        .summary-row .val { color: var(--white); font-weight: 600; }
        .summary-total { display: flex; justify-content: space-between; padding: 15px 0; margin-top: 10px; border-top: 1px solid rgba(255,255,255,0.2); font-size: 16px; font-weight: 700; }
        .summary-total .lbl { color: var(--gold); }
        .summary-total .val { color: var(--white); }
        
        /* Currency Buttons */
        .curr-btns { display: flex; gap: 8px; margin-top: 15px; }
        .curr-btn { flex: 1; padding: 10px; border: 1px solid rgba(255,255,255,0.2); background: transparent; color: var(--gray-400); border-radius: 6px; cursor: pointer; font-size: 12px; font-weight: 600; transition: all 0.3s; }
        .curr-btn:hover { border-color: var(--gold); color: var(--gold); }
        .curr-btn.active { background: var(--gold); border-color: var(--gold); color: var(--navy-dark); }
        .rate-info { margin-top: 10px; font-size: 10px; color: var(--gray-500); text-align: center; }
        
        /* Main Group (like ASIS Accessories) */
        .main-group { margin-bottom: 15px; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.08); }
        .main-group-header { background: linear-gradient(135deg, var(--navy), var(--navy-light)); color: var(--white); padding: 18px 22px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
        .main-group-header:hover { background: linear-gradient(135deg, var(--navy-light), var(--navy)); }
        .main-group-header h2 { font-size: 15px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; display: flex; align-items: center; gap: 10px; margin: 0; }
        .main-group-header h2 .group-icon { font-size: 22px; }
        .main-group-header .group-total { background: var(--gold); color: var(--navy-dark); padding: 6px 16px; border-radius: 20px; font-size: 14px; font-weight: 700; }
        .main-group-header .group-arrow { font-size: 14px; margin-left: 12px; transition: transform 0.3s; }
        .main-group-header.open .group-arrow { transform: rotate(180deg); }
        .main-group-content { max-height: 0; overflow: hidden; transition: max-height 0.5s ease; background: var(--gray-50); }
        .main-group-content.open { max-height: 15000px; }
        .main-group-inner { padding: 15px; }
        .main-group-inner .category { margin-bottom: 10px; }
        
        /* Flat category (top-level like Propulsion) */
        .flat-category { margin-bottom: 20px; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.08); }
        .flat-category .cat-header { background: linear-gradient(135deg, #1a365d, #2d4a7c); padding: 18px 22px; }
        .flat-category .cat-header h3 { font-size: 16px; font-weight: 700; letter-spacing: 1px; }
        .flat-category .cat-total { padding: 6px 16px; border-radius: 20px; font-size: 14px; font-weight: 700; }
        
        /* Nested subgroup (e.g., Seating within ASIS Accessories) */
        .subgroup { margin-bottom: 10px; border-radius: 8px; overflow: hidden; border: 1px solid var(--gray-300); }
        .subgroup-header { background: linear-gradient(135deg, #4a5568, #718096); color: var(--white); padding: 12px 16px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; }
        .subgroup-header:hover { background: linear-gradient(135deg, #718096, #4a5568); }
        .subgroup-header h4 { font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; margin: 0; }
        .subgroup-header .subgroup-total { background: var(--gold); color: var(--navy-dark); padding: 3px 10px; border-radius: 12px; font-size: 11px; font-weight: 600; }
        .subgroup-header .subgroup-arrow { font-size: 10px; margin-left: 10px; transition: transform 0.3s; }
        .subgroup-header.open .subgroup-arrow { transform: rotate(180deg); }
        .subgroup-content { max-height: 0; overflow: hidden; transition: max-height 0.4s ease; background: var(--gray-100); }
        .subgroup-content.open { max-height: 5000px; }
        .subgroup-inner { padding: 10px; }
        .subgroup-inner .category { margin-bottom: 8px; }
        
        .cat-inner { padding: 15px; }
        
        /* Item Grid */
        .item-grid-header { display: grid; grid-template-columns: 2fr 70px 110px 100px 40px; gap: 10px; padding: 10px 12px; background: var(--gray-100); border-radius: 6px; margin-bottom: 10px; }
        .item-grid-header span { font-size: 10px; font-weight: 600; color: var(--gray-600); text-transform: uppercase; }
        .item-grid-header .right { text-align: right; }
        
        .item-row { display: grid; grid-template-columns: 2fr 70px 110px 100px 40px; gap: 10px; padding: 12px; border-bottom: 1px solid var(--gray-200); align-items: center; transition: background 0.2s; }
        .item-row:hover { background: var(--gray-100); }
        .item-row:last-of-type { border-bottom: none; }
        .item-row select { width: 100%; padding: 10px; border: 1px solid var(--gray-300); border-radius: 6px; font-size: 13px; background: var(--white); cursor: pointer; }
        .item-row select:focus { outline: none; border-color: var(--gold); }
        .item-row input[type="number"] { width: 100%; padding: 10px; border: 1px solid var(--gray-300); border-radius: 6px; text-align: center; font-size: 13px; font-weight: 500; }
        .item-row .price-input { text-align: right; font-weight: 600; color: var(--gray-700); }
        .item-row .extended { font-weight: 700; color: var(--success); text-align: right; font-size: 14px; }
        .item-row .tbd { color: var(--warning); font-style: italic; }
        .delete-btn { width: 36px; height: 36px; border: none; background: var(--danger); color: var(--white); border-radius: 6px; cursor: pointer; font-size: 18px; transition: all 0.2s; display: flex; align-items: center; justify-content: center; }
        .delete-btn:hover { background: #c82333; transform: scale(1.05); }
        .add-btn { background: var(--success); color: var(--white); border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer; font-size: 13px; font-weight: 600; margin-top: 12px; transition: all 0.2s; display: inline-flex; align-items: center; gap: 8px; }
        .add-btn:hover { background: #218838; transform: translateY(-1px); }
        
        .custom-input { width: 100%; padding: 10px; border: 2px dashed var(--gold); border-radius: 6px; font-size: 13px; background: #fffef5; }
        .custom-input:focus { outline: none; border-style: solid; }
        
        /* Forms */
        .form-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        @media (max-width: 600px) { .form-grid { grid-template-columns: 1fr; } }
        .form-group { display: flex; flex-direction: column; }
        .form-group.full { grid-column: span 2; }
        .form-group label { font-size: 11px; font-weight: 600; color: var(--gray-600); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 6px; }
        .form-group input, .form-group select, .form-group textarea { padding: 12px 14px; border: 2px solid var(--gray-200); border-radius: 8px; font-size: 14px; font-family: inherit; transition: border-color 0.3s; }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus { outline: none; border-color: var(--gold); }
        
        /* Buttons */
        .btn { padding: 14px 28px; border: none; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.3s; display: inline-flex; align-items: center; gap: 10px; text-transform: uppercase; letter-spacing: 0.5px; }
        .btn-primary { background: linear-gradient(135deg, var(--gold), var(--gold-dark)); color: var(--navy-dark); box-shadow: 0 4px 15px rgba(201,162,39,0.3); }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(201,162,39,0.4); }
        .btn-secondary { background: var(--gray-200); color: var(--gray-700); }
        .btn-secondary:hover { background: var(--gray-300); }
        .btn-success { background: linear-gradient(135deg, var(--success), #1e7e34); color: var(--white); }
        .btn-outline { background: linear-gradient(135deg, #4a5568, #718096); color: var(--white); border: none; }
        .btn-outline:hover { background: linear-gradient(135deg, #2d3748, #4a5568); color: var(--white); }
        .actions { display: flex; justify-content: space-between; margin-top: 25px; padding-top: 25px; border-top: 1px solid var(--gray-200); }
        
        /* Preview */
        .preview { background: var(--white); border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); overflow: hidden; }
        .preview-header { background: var(--navy); color: var(--white); padding: 40px; text-align: center; }
        .preview-header h1 { font-size: 28px; font-weight: 700; margin-bottom: 5px; }
        .preview-header p { color: var(--gold); font-size: 14px; letter-spacing: 2px; }
        .preview-body { padding: 40px; }
        .preview-meta { display: grid; grid-template-columns: repeat(2, 1fr); gap: 30px; margin-bottom: 30px; padding-bottom: 30px; border-bottom: 2px solid var(--gray-200); }
        .preview-meta h4 { color: var(--navy); font-size: 12px; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 10px; }
        .preview-meta p { font-size: 14px; color: var(--gray-700); line-height: 1.8; }
        .preview-table { width: 100%; border-collapse: collapse; margin-bottom: 30px; }
        .preview-table th { background: var(--navy); color: var(--white); padding: 14px; text-align: left; font-size: 12px; text-transform: uppercase; }
        .preview-table th.right { text-align: right; }
        .preview-table td { padding: 14px; border-bottom: 1px solid var(--gray-200); font-size: 14px; }
        .preview-table td.right { text-align: right; }
        .preview-totals { text-align: right; }
        .preview-totals div { padding: 8px 0; font-size: 15px; }
        .preview-totals .grand { font-size: 20px; font-weight: 700; color: var(--navy); border-top: 2px solid var(--navy); padding-top: 15px; margin-top: 10px; }
        .preview-notes { margin-top: 30px; padding: 20px; background: var(--gray-100); border-radius: 8px; border-left: 4px solid var(--gold); }
        .preview-notes h4 { color: var(--navy); font-size: 12px; text-transform: uppercase; margin-bottom: 10px; }
        .preview-notes p { font-size: 14px; color: var(--gray-700); white-space: pre-wrap; }

        /* Selected Items */
        .selected-items { max-height: 300px; overflow-y: auto; }
        .sel-item { display: flex; justify-content: space-between; padding: 6px 0; font-size: 12px; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .sel-item .name { color: var(--gray-300); max-width: 180px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        .sel-item .amt { color: var(--gold-light); font-weight: 600; }

        /* Info banner */
        .info-banner { background: linear-gradient(135deg, #e3f2fd, #bbdefb); border: 1px solid #90caf9; border-radius: 8px; padding: 15px 20px; margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }
        .info-banner .icon { font-size: 24px; }
        .info-banner .text { font-size: 13px; color: #1565c0; }
        .info-banner .text strong { display: block; margin-bottom: 3px; }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-inner">
            <div class="logo-area">
                <div class="logo-text">
                    <span>Advanced Maritime Solutions</span>
                    <h1>ASIS BOATS</h1>
                </div>
            </div>
            <div class="header-right">
                <div class="quote-badge" id="quoteBadge">ASIS-25-0001</div>
            </div>
        </div>
    </header>

    <nav class="progress-bar">
        <div class="progress-inner">
            <div class="step active" onclick="window.goTo(1)"><div class="step-num">1</div><div class="step-label">Boat Selection</div></div>
            <div class="step" onclick="window.goTo(2)"><div class="step-num">2</div><div class="step-label">Configuration</div></div>
            <div class="step" onclick="window.goTo(3)"><div class="step-num">3</div><div class="step-label">Information</div></div>
            <div class="step" onclick="window.goTo(4)"><div class="step-num">4</div><div class="step-label">Review</div></div>
        </div>
    </nav>

    <main class="main">
        <!-- PAGE 1: BOAT SELECTION -->
        <div id="page1" class="page active">
            <div class="layout">
                <div>
                    <div class="card">
                        <div class="card-header"><h2>Select Boat Type</h2></div>
                        <div class="card-body">
                            <div class="boat-types" id="boatTypesGrid"></div>
                        </div>
                    </div>
                    <div class="card" id="sizesCard" style="display:none;">
                        <div class="card-header"><h2>Select Size</h2></div>
                        <div class="card-body">
                            <div class="boat-sizes" id="boatSizesGrid"></div>
                        </div>
                    </div>
                    <div class="actions">
                        <div></div>
                        <button class="btn btn-primary" onclick="window.goTo(2)" id="nextBtn1" disabled>Continue to Configuration ‚Üí</button>
                    </div>
                </div>
                <aside>
                    <div class="summary">
                        <div class="summary-title">Quote Summary</div>
                        <div class="summary-row"><span class="lbl">Boat Type</span><span class="val" id="sumType">-</span></div>
                        <div class="summary-row"><span class="lbl">Size</span><span class="val" id="sumSize">-</span></div>
                        <div class="summary-row"><span class="lbl">Base Price</span><span class="val" id="sumBase">-</span></div>
                        <div class="summary-row"><span class="lbl">Options & Accessories</span><span class="val" id="sumOptions">$0</span></div>
                        <div class="summary-total"><span class="lbl">Total</span><span class="val" id="sumTotal">$0</span></div>
                        <div class="curr-btns">
                            <button class="curr-btn active" onclick="window.setCurrency('USD')">USD</button>
                            <button class="curr-btn" onclick="window.setCurrency('AED')">AED</button>
                            <button class="curr-btn" onclick="window.setCurrency('EUR')">EUR</button>
                        </div>
                        <div id="rateInfo1" class="rate-info"></div>
                    </div>
                </aside>
            </div>
        </div>

        <!-- PAGE 2: CONFIGURATION -->
        <div id="page2" class="page">
            <div class="layout">
                <div>
                    <div class="info-banner">
                        <span class="icon">‚ÑπÔ∏è</span>
                        <div class="text">
                            <strong>Accessories shown are specific to your selected boat type and size.</strong>
                            Items marked "TBD" have pricing to be determined. Items not available for your boat size are hidden.
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <h2>Configure Your Boat</h2>
                            <span style="color:var(--gold);font-size:12px;" id="selectedBoatLabel">-</span>
                        </div>
                        <div class="card-body" style="padding:0;">
                            <div id="categoriesContainer"></div>
                        </div>
                    </div>
                    <div class="actions">
                        <button class="btn btn-secondary" onclick="window.goTo(1)">‚Üê Back</button>
                        <button class="btn btn-primary" onclick="window.goTo(3)">Continue to Information ‚Üí</button>
                    </div>
                </div>
                <aside>
                    <div class="summary">
                        <div class="summary-title">Selected Items</div>
                        <div class="selected-items" id="selectedItemsList"></div>
                        <div class="summary-total"><span class="lbl">Total</span><span class="val" id="sumTotal2">$0</span></div>
                        <div class="curr-btns">
                            <button class="curr-btn active" onclick="window.setCurrency('USD')">USD</button>
                            <button class="curr-btn" onclick="window.setCurrency('AED')">AED</button>
                            <button class="curr-btn" onclick="window.setCurrency('EUR')">EUR</button>
                        </div>
                        <div id="rateInfo2" class="rate-info"></div>
                    </div>
                </aside>
            </div>
        </div>

        <!-- PAGE 3: INFORMATION -->
        <div id="page3" class="page">
            <div class="layout">
                <div>
                    <div class="card">
                        <div class="card-header"><h2>Quote Information</h2></div>
                        <div class="card-body">
                            <div class="form-grid">
                                <div class="form-group" style="grid-column: span 2;"><label>Quotation Title</label><input type="text" id="quoteTitle" placeholder="e.g., 12m Aluminum RIB Boats"></div>
                                <div class="form-group"><label>Quote Number</label><input type="text" id="quoteNum" value="ASIS-25-0001" onchange="document.getElementById('quoteBadge').textContent=this.value"></div>
                                <div class="form-group"><label>Date</label><input type="date" id="quoteDate"></div>
                                <div class="form-group"><label>Validity</label><select id="validity"><option selected>30 Days</option><option>90 Days</option></select></div>
                                <div class="form-group"><label>Salesman</label><select id="salesman"><option value="">-- Select Salesman --</option><option value="mario">Mario Hoyek</option><option value="soufiane">Soufiane Tangi</option><option value="toji">Toji Paul</option></select></div>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header"><h2>Customer Information</h2></div>
                        <div class="card-body">
                            <div class="form-grid">
                                <div class="form-group"><label>Company / Organization</label><input type="text" id="custCompany" placeholder="Company name"></div>
                                <div class="form-group"><label>Contact Person</label><input type="text" id="custName" placeholder="Full name"></div>
                                <div class="form-group"><label>Email</label><input type="email" id="custEmail" placeholder="email@company.com"></div>
                                <div class="form-group"><label>Phone</label><input type="tel" id="custPhone" placeholder="+971 XX XXX XXXX"></div>
                                <div class="form-group"><label>Tender Number <span style="font-weight:400;color:var(--gray-500);">(Optional)</span></label><input type="text" id="tenderNum" placeholder="Tender/RFQ number"></div>
                                <div class="form-group"><label>Address / Country</label><textarea id="custAddr" rows="2" placeholder="Address or country"></textarea></div>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header"><h2>Terms & Conditions</h2></div>
                        <div class="card-body">
                            <div class="form-grid">
                                <div class="form-group"><label>Payment Terms</label><select id="payTerms"><option>50% Deposit, 50% on Delivery</option><option>30% / 70%</option><option>100% on Order</option></select></div>
                                <div class="form-group"><label>Delivery Terms</label><input type="text" id="deliveryTerms" value="Ex Factory" placeholder="Ex Factory, FOB, CIF, etc."></div>
                                <div class="form-group">
                                    <label>Delivery Timeline</label>
                                    <select id="deliverySelect" onchange="window.toggleDeliveryInput()">
                                        <option value="TBD" selected>TBD</option>
                                        <option value="60-90 Days">60-90 Days</option>
                                        <option value="90-120 Days">90-120 Days</option>
                                        <option value="custom">Custom...</option>
                                    </select>
                                    <input type="text" id="deliveryCustom" placeholder="Enter custom timeline" style="display:none;margin-top:8px;">
                                </div>
                                <div class="form-group"><label>Discount %</label><input type="number" id="discount" value="0" min="0" max="100" onchange="window.updateTotals()"></div>
                                <div class="form-group" style="display:flex;align-items:center;gap:10px;padding-top:20px;">
                                    <input type="checkbox" id="hideSubPrices" checked style="width:18px;height:18px;cursor:pointer;">
                                    <label for="hideSubPrices" style="margin:0;cursor:pointer;font-weight:normal;">Hide individual prices (show only total)</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header"><h2>Notes</h2></div>
                        <div class="card-body">
                            <div class="form-group full">
                                <textarea id="quoteNotes" rows="4" placeholder="Additional notes, special requirements, or comments for this quotation..."></textarea>
                            </div>
                        </div>
                    </div>
                    <div class="actions">
                        <button class="btn btn-secondary" onclick="window.goTo(2)">‚Üê Back</button>
                        <button class="btn btn-primary" onclick="window.goTo(4)">Preview Quotation ‚Üí</button>
                    </div>
                </div>
                <aside>
                    <div class="summary">
                        <div class="summary-title">Order Summary</div>
                        <div class="summary-row"><span class="lbl">Subtotal</span><span class="val" id="sumSub3">$0</span></div>
                        <div class="summary-row"><span class="lbl">Discount</span><span class="val" id="sumDisc3">-$0</span></div>
                        <div class="summary-total"><span class="lbl">Grand Total</span><span class="val" id="sumTotal3">$0</span></div>
                    </div>
                </aside>
            </div>
        </div>

        <!-- PAGE 4: REVIEW & EXPORT -->
        <div id="page4" class="page">
            <div class="card" style="margin-bottom:20px;">
                <div class="card-header">
                    <h2>Quotation Preview</h2>
                    <div style="display:flex;gap:10px;">
                        <button class="btn btn-success" onclick="window.downloadPDF()">üìÑ Download PDF</button>
                        <button class="btn btn-outline" onclick="window.downloadCSV()">üìä Export CSV</button>
                        <button class="btn btn-outline" onclick="window.print()">üñ®Ô∏è Print</button>
                    </div>
                </div>
            </div>
            <div class="preview" id="previewArea">
                <div class="preview-header">
                    <h1>ASIS BOATS LLC</h1>
                    <p>PROFESSIONAL QUOTATION</p>
                    <p id="prevQuoteTitle" style="font-size:18px;margin-top:10px;color:var(--white);font-weight:600;"></p>
                </div>
                <div class="preview-body">
                    <div class="preview-meta">
                        <div><h4>Quotation Details</h4><p id="prevQuoteInfo"></p></div>
                        <div><h4>Customer</h4><p id="prevCustInfo"></p></div>
                    </div>
                    <table class="preview-table">
                        <thead><tr><th>Description</th><th>Qty</th><th class="right">Unit Price</th><th class="right">Total</th></tr></thead>
                        <tbody id="prevItems"></tbody>
                    </table>
                    <div class="preview-totals" id="prevTotals"></div>
                    <div class="preview-notes" id="prevNotes" style="display:none;"><h4>Notes</h4><p id="prevNotesText"></p></div>
                </div>
            </div>
            <div class="actions">
                <button class="btn btn-secondary" onclick="window.goTo(3)">‚Üê Edit</button>
                <button class="btn btn-primary" onclick="window.downloadPDF()">Generate & Download PDF</button>
            </div>
        </div>
    </main>

    <script type="module">
        // Import modules
        import { 
            init, 
            goTo, 
            setCurrency, 
            updateTotals, 
            toggleDeliveryInput,
            toggleMainGroup,
            toggleSubgroup,
            toggleCategory,
            addItem,
            itemSelected,
            updateItemQty,
            updateItemPrice,
            removeItem,
            state,
            fmtPrice,
            getDeliveryTimeline
        } from './ui.js';
        
        import { downloadPDF, downloadCSV } from './pdf-generator.js';
        
        // Expose functions to global scope for onclick handlers
        window.goTo = goTo;
        window.setCurrency = setCurrency;
        window.updateTotals = updateTotals;
        window.toggleDeliveryInput = toggleDeliveryInput;
        window.toggleMainGroup = toggleMainGroup;
        window.toggleSubgroup = toggleSubgroup;
        window.toggleCategory = toggleCategory;
        window.addItem = addItem;
        window.itemSelected = itemSelected;
        window.updateItemQty = updateItemQty;
        window.updateItemPrice = updateItemPrice;
        window.removeItem = removeItem;
        window.downloadPDF = downloadPDF;
        window.downloadCSV = downloadCSV;
        
        // Initialize the application
        init();
    </script>
</body>
</html>
